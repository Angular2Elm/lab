<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
</head>
<body>
<label>开关序号：<input id="num"/></label>（数字）
<br>
<button id="on">on</button>
<button id="off">off</button>
<button id="look">查询</button>
<script type="text/javascript" src="../../base/javascript/ks-core.js"></script>
<script type="text/javascript">
    var S = KISSY
            ,num = S.one("#num")
            ,on = S.one("#on")
            ,off = S.one("#off")
            ,all_one = (Math.pow(2, 32) - 1)
            ,look = S.one("#look");
    var store = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
    function check() {
        if (!/\d+/.test(num.val())) {
            alert("开关请输入整数！");
            return;
        }
        var n = parseInt(num.val());
        if (n > store.length * 32) {
            alert("最多：" + store.length * 32);
            return;
        }
        return n;

    }
    look.on("click", function() {
        var num = check();
        if (typeof num !== "number") return;
        var index = Math.floor(num / 32),
                index2 = num % 32,
                mask = Math.pow(2, index2);
        alert(store[index] & mask ? "on" : "off");
    });
    on.on("click", function() {
        var num = check();
        if (typeof num !== "number") return;
        var index = Math.floor(num / 32),
                index2 = num % 32,
                mask = Math.pow(2, index2);
        store[index] |= mask;
        alert("设置成功");
    });
    off.on("click", function() {
        var num = check();
        if (typeof num !== "number") return;
        var index = Math.floor(num / 32),
                index2 = num % 32,
                mask = all_one ^ Math.pow(2, index2);
        store[index] &= mask;
        alert("设置成功");
    });

</script>
</body>
</html>