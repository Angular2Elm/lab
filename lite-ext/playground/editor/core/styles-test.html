<!doctype html>
<html>
<head>
<meta charset="gbk"/>
<title>range Test</title>
<script type="text/javascript"
        src="../../../base/javascript/ks-core.js" charset="utf-8"></script>
<script type="text/javascript"
        src="http://github.com/yiminghe/kissy-sandbox/raw/master/attribute/attribute.js"></script>
<script type="text/javascript"
        src="editor.js"></script>
<script type="text/javascript"
        src="dtd.js"></script>
<script type="text/javascript"
        src="dom.js"></script>
<script type="text/javascript"
        src="elementpath.js"></script>
<script type="text/javascript"
        src="walker.js"></script>
<script type="text/javascript"
        src="range.js"></script>
<script type="text/javascript"
        src="domiterator.js"></script>
<script type="text/javascript"
        src="selection.js"></script>
<script type="text/javascript"
        src="styles.js"></script>
<script type="text/javascript"
        src="../plugins/font/plugin.js"></script>
<script type="text/javascript"
        src="../plugins/format/plugin.js"></script>
</head>
<body>

<h1>选择区域文字后 run </h1>

<div id="tools"></div>
<div style="height:200px;border:1px solid green;">
    <textarea id="edit">
        <p>123 456 7890123 45678
            <img src="http://img05.taobaocdn.com/tps/i5/T117hGXndsXXXXXXXX-15-13.gif">
            abcdef ghijk
        </p>
        <p>123 456 7890123 45678
            <img src="http://img05.taobaocdn.com/tps/i5/T117hGXndsXXXXXXXX-15-13.gif">
            abcdef ghijk
        </p>
    </textarea>
</div>

<h1>生成格式化html：</h1>
<textarea id="re" style="margin:10px auto;border:1px solid green;width:80%;height:300px;" readonly></textarea>

<br>

<script type="text/javascript">

    KISSY.ready(function(S) {
        var Node = S.Node,
                editor = new S.Editor(S.one("#edit"), S.one("#tools"));
        S.one("#re")._4e_unselectable();

        setInterval(function() {
            S.one("#re").val(editor.getData());
        }, 500);
        editor.on("dataReady", function() {
            S.one("#re").val(editor.getData());
        });

    });

</script>
</body>
</html>