<!doctype html>
<html>
<head>
<meta charset="gbk"/>
<title>range Test</title>
<script type="text/javascript"
        src="http://kissy.googlecode.com/svn/trunk/build/packages/ks-core.js"></script>
<script type="text/javascript"
        src="http://github.com/yiminghe/kissy-sandbox/raw/master/attribute/attribute.js"></script>
<script type="text/javascript"
        src="editor.js"></script>
<script type="text/javascript"
        src="dtd.js"></script>
<script type="text/javascript"
        src="dom.js"></script>
<script type="text/javascript"
        src="elementpath.js"></script>
<script type="text/javascript"
        src="walker.js"></script>
<script type="text/javascript"
        src="range.js"></script>
<script type="text/javascript"
        src="selection.js"></script>
<script type="text/javascript"
        src="styles.js"></script>
<script type="text/javascript"
        src="../plugins/font/plugin.js"></script>
</head>
<body>

<h1>选择区域文字后 run </h1>

<iframe style="width:90%;margin:10px auto;padding:10px;border:1px solid green;" id="p"
        src="">
</iframe>


<div id="tools"></div>

<h1>生成格式化html：</h1>
<textarea id="re" style="margin:10px auto;border:1px solid green;width:80%;height:100px;" readonly></textarea>

<br>

<script type="text/javascript">

    KISSY.ready(function(S) {
        var Node = S.Node,
                iframe = S.one("#p")[0].contentWindow.document,
                editor = new S.Editor(iframe, S.one("#tools"));
        S.one("#re")._4e_unselectable();
        iframe.open();
        iframe.writeln("<html><body><div>123 456 7890123 45678" +
                "<img src='http://img05.taobaocdn.com/tps/i5/T117hGXndsXXXXXXXX-15-13.gif'" + " / " + " > "
                + "abcdef ghijk</body></div></html>");
        iframe.close();
        iframe.designMode = 'on';

        editor.on("fontSizeChange", function() {
            S.one("#re").val(iframe.body.innerHTML);
        });
        S.one("#p").on("load", function() {
            S.one("#re").val(iframe.body.innerHTML);
        });

    });

</script>
</body>
</html>