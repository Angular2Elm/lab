<!doctype html>
<html>
<head>
<meta charset="gbk"/>
<title>Simple Editor Test</title>
<link href="../../../base/css/ks-base.css?t=20100804151801" rel="stylesheet"/>
<link href="../core/kissyeditor.css?t=20100804151801" rel="stylesheet"/>
<link href="../ui/button.css?t=20100804151801" rel="stylesheet"/>
<link href="../ui/overlay.css?t=20100804151801" rel="stylesheet"/>
<link href="../ui/contextmenu.css?t=20100804151801" rel="stylesheet"/>
<link href="../plugins/elementpath/plugin.css?t=20100804151801" rel="stylesheet"/>
<link href="../plugins/color/plugin.css?t=20100804151801" rel="stylesheet"/>
<link href="../plugins/table/plugin.css?t=20100804151801" rel="stylesheet"/>
<link href="../plugins/templates/plugin.css?t=20100804151801" rel="stylesheet"/>
<link href="../plugins/smiley/plugin.css?t=20100804151801" rel="stylesheet"/>
</head>
<body>

<h1>Simple Editor Demo (支持表格右键)</h1>

<div style="width:90%;margin:0 auto;">

    <textarea id="edit" style="width:100%;height:400px;border:none;margin:0 auto;">
        <script>alert(1);</script>
        <p>我是音乐：</p>
        <object height="37"
                align=""
                width="165"
                codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"
                classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
            <param
                    value="../plugins/music/niftyplayer.swf?file=../plugins/music/betty.mp3&amp;as=0"
                    name="movie">
            <param value="high" name="quality">
            <param value="#FFFFFF" name="bgcolor">
            <embed height="37"
                   align=""
                   width="165"
                   pluginspage="http://www.macromedia.com/go/getflashplayer"
                   swliveconnect="true"
                   type="application/x-shockwave-flash"
                   bgcolor="#FFFFFF"
                   quality="high"
                   src="../plugins/music/niftyplayer.swf?file=../plugins/music/betty.mp3&amp;as=0">
        </object>

        <p> 1 2 3 4 5 6 7 78 <a href="http://www.g.cn">我是google</a> 1 1 1 12234 3 45</p>
        <p>我是段落 <span style="background-color: red;"> 我是段落 我是段落 </span> 我是段落 <img src="http://img05.taobaocdn.com/tps/i5/T117hGXndsXXXXXXXX-15-13.gif"> 我是段落 我是段落 </p>  <p> 我是段落 我是段落 <br></p>

        <p>我是表格，支持右键</p>
        <table style="width: 200px;" border="1" cellpadding="1" cellspacing="1">
            <tbody>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3 <span>3.1</span> 3.2 <span>3.3</span></td>
            </tr>
            <tr>
                <td>4</td>
                <td>5</td>
                <td>6</td>
            </tr>
            </tbody>
        </table>

        <p>我是段落 <span style="background-color: red;"> 我是段落 我是段落 </span> 我是段落 <img src="http://img05.taobaocdn.com/tps/i5/T117hGXndsXXXXXXXX-15-13.gif"> 我是段落 我是段落 </p>  <p> 我是段落 我是段落 <br></p>

        <p>我是flash：</p>
        <embed src="http://player.youku.com/player.php/sid/XMTk2ODAzNjg0/v.swf" quality="high" width="480" height="400" align="middle" allowScriptAccess="sameDomain" type="application/x-shockwave-flash"></embed>

        <ul>
            <li> 我是列表1</li>
            <li> 我是列表2
                <ul>
                    <li> 我是列表2.1</li>
                    <li> 我是列表2.2</li>
                    <li> 我是列表2.3</li>
                </ul>
            </li>
            <li> 我是列表3</li>
        </ul>
    </textarea>
</div>

<button id="t">parse</button>

<div style="width:90%;margin:0 auto;">

    <textarea id="edit2" style="width:100%;height:400px;border:none;border:1px solid none;margin:0 auto;">
        <script>alert(1);</script>
        <p>我是音乐：</p>

        <object height="37"
                align=""
                width="165"
                codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"
                classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
            <param
                    value="../plugins/music/niftyplayer.swf?file=../plugins/music/betty.mp3&amp;as=0"
                    name="movie">
            <param value="high" name="quality">
            <param value="#FFFFFF" name="bgcolor">
            <embed height="37"
                   align=""
                   width="165"
                   pluginspage="http://www.macromedia.com/go/getflashplayer"
                   swliveconnect="true"
                   type="application/x-shockwave-flash"
                   bgcolor="#FFFFFF"
                   quality="high"
                   src="../plugins/music/niftyplayer.swf?file=../plugins/music/betty.mp3&amp;as=0">
        </object>

        <p> 1 2 3 4 5 6 7 78 <a href="http://www.g.cn">我是google</a> 1 1 1 12234 3 45</p>
        <p>我是段落 <span style="background-color: red;"> 我是段落 我是段落 </span> 我是段落 <img src="http://img05.taobaocdn.com/tps/i5/T117hGXndsXXXXXXXX-15-13.gif"> 我是段落 我是段落 </p>  <p> 我是段落 我是段落 <br></p>

        <p>我是表格，支持右键</p>
        <table style="width: 200px;" border="1" cellpadding="1" cellspacing="1">
            <tbody>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3 <span>3.1</span> 3.2 <span>3.3</span></td>
            </tr>
            <tr>
                <td>4</td>
                <td>5</td>
                <td>6</td>
            </tr>
            </tbody>
        </table>

        <p>我是段落 <span style="background-color: red;"> 我是段落 我是段落 </span> 我是段落 <img src="http://img05.taobaocdn.com/tps/i5/T117hGXndsXXXXXXXX-15-13.gif"> 我是段落 我是段落 </p>  <p> 我是段落 我是段落 <br></p>

        <p>我是flash：</p>
        <embed src="http://player.youku.com/player.php/sid/XMTk2ODAzNjg0/v.swf" quality="high" width="480" height="400" align="middle" allowScriptAccess="sameDomain" type="application/x-shockwave-flash"></embed>

        <ul>
            <li> 我是列表1</li>
            <li> 我是列表2
                <ul>
                    <li> 我是列表2.1</li>
                    <li> 我是列表2.2</li>
                    <li> 我是列表2.3</li>
                </ul>
            </li>
            <li> 我是列表3</li>
        </ul>
    </textarea>
</div>
<script type="text/javascript"
        src="../../../base/javascript/ks-core.js?t=20100804151801" charset="utf-8"></script>
<script type="text/javascript"
        src="../../../base/javascript/attribute.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/kissyeditor.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/utils.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/focusmanager.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/editor.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../ui/button.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../ui/overlay.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../ui/contextmenu.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/dtd.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/dom.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/elementpath.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/walker.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/range.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/domiterator.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/selection.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../core/styles.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/htmldataprocessor/htmlparser/htmlparser.js"></script>
<script type="text/javascript"
        src="../plugins/htmldataprocessor/htmlparser/basicwriter.js"></script>
<script type="text/javascript"
        src="../plugins/htmldataprocessor/htmlparser/htmlwriter.js"></script>

<script type="text/javascript"
        src="../plugins/htmldataprocessor/htmlparser/fragment.js"></script>
<script type="text/javascript"
        src="../plugins/htmldataprocessor/htmlparser/element.js"></script>
<script type="text/javascript"
        src="../plugins/htmldataprocessor/htmlparser/filter.js"></script>
<script type="text/javascript"
        src="../plugins/htmldataprocessor/htmlparser/text.js"></script>

<script type="text/javascript"
        src="../plugins/htmldataprocessor/plugin.js"></script>
<script type="text/javascript"
        src="../plugins/sourcearea/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/preview/plugin.js?t=20100804151801"></script>

<script type="text/javascript"
        src="../plugins/font/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/format/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/list/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/indent/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/elementpath/plugin.js?t=20100804151801"></script>

<script type="text/javascript"
        src="../plugins/image/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/color/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/undo/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/table/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/justify/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/templates/plugin.js?t=20100804151801"></script>
<script type="text/javascript"
        src="../plugins/maximize/plugin.js"></script>
<script type="text/javascript"
        src="../plugins/fakeobjects/plugin.js"></script>
<script type="text/javascript"
        src="../plugins/flash/plugin.js"></script>
<script type="text/javascript"
        src="../plugins/link/plugin.js"></script>
<script type="text/javascript"
        src="../plugins/music/plugin.js"></script>
<script type="text/javascript"
        src="../plugins/smiley/plugin.js"></script>
<script type="text/javascript">

    KISSY.ready(function(S) {
        //return;
        var KE = KISSYEDITOR,Node = S.Node;
        window.editor = new S.Editor(S.one("#edit"));
        window.editor2 = new S.Editor(S.one("#edit2"));

        S.one("#t").on("click", function() {
            //htmlparser nb
            var t = KE.HtmlDataProcessor.toDataFormat(
                //"<img src='xx'><span>5<div>6</div>7</span>"+
                    "<script>alert(1);<" + "/script>"
                //+"<ul style='color:red;'><ul><li>xxx</ul><li>1<li>2<ul>"
                    );
            console.log(t);
        });


    });

</script>
</body>
</html>